<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <title>数字/模拟调制信号生成器</title>
    <link rel="stylesheet" href="modulation_generator.css">
    <style>
        /* 简约风格覆盖 */
        body { background-color: #f5f7fa; padding: 20px; }
        .container { background: transparent; box-shadow: none; height: auto; }
        .main-content { padding: 0; }
        .modulation-panel { background: #fff; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); padding: 20px; margin-bottom: 20px; }
        h2 { font-size: 1.1rem; color: #2c3e50; margin-bottom: 15px; border-bottom: 1px solid #eee; padding-bottom: 10px; }
        .btn { border-radius: 4px; font-weight: 500; transition: all 0.2s; }
        .btn:hover { transform: translateY(-1px); box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        /* 隐藏冗余元素 */
        header { display: none; }
    </style>
</head>
<body>
    <div class="container">
        
        <div class="main-content">
            <!-- 调制参数设置 -->            <div class="modulation-panel">
                <h2>调制参数设置</h2>
                
                <!-- 调制模式切换 -->
                <div class="form-group">
                    <label>调制模式:</label>
                    <div class="mode-switch">
                        <button id="digitalModeBtn" class="btn mode-btn active">数字调制 (ASK/BPSK)</button>
                        <button id="analogModeBtn" class="btn mode-btn">模拟调制 (AM/FM)</button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="modulationType">调制类型:</label>
                    <select id="modulationType">
                        <option value="ask">ASK (振幅键控)</option>
                        <option value="bpsk">BPSK (二进制相移键控)</option>
                        <option value="am" style="display: none;">AM (调幅)</option>
                        <option value="fm" style="display: none;">FM (调频)</option>
                    </select>
                </div>                <div class="form-group">
                    <label for="carrierFreq">载波频率 (Hz):</label>
                    <input type="number" id="carrierFreq" value="100000" min="100" max="5000000" step="1000">
                    <span class="help-text">范围: 100Hz - 5MHz，建议载波频率不超过采样率的1/10</span>
                </div>                  <div class="form-group">
                    <label for="baudRate">波特率 (bps):</label>
                    <select id="baudRate">
                        <option value="100">100 bps</option>
                        <option value="200">200 bps</option>
                        <option value="300">300 bps</option>
                        <option value="600">600 bps</option>
                        <option value="1200">1200 bps</option>
                        <option value="2400">2400 bps</option>
                        <option value="4800">4800 bps</option>
                        <option value="9600">9600 bps</option>
                        <option value="19200" selected>19200 bps</option>
                        <option value="38400">38400 bps</option>
                    </select>
                </div>                <div class="form-group">
                    <label for="sampleRate">采样率 (Hz):</label>
                    <input type="number" id="sampleRate" value="1000000" min="10000" max="50000000" step="1000">
                    <span class="help-text">范围: 10kHz - 50MHz，高采样率可生成更高质量信号</span>
                </div>
                
                <div class="form-group">
                    <label for="sampleCount">采样点数:</label>
                    <select id="sampleCount">
                        <option value="9000">9K点 (9000)</option>
                        <option value="100000">100K点</option>
                        <option value="500000">500K点</option>
                        <option value="1000000">1M点</option>
                        <option value="4000000">4M点</option>
                        <option value="8000000" selected>8M点 (推荐)</option>
                    </select>
                    <span class="help-text">更多采样点提供更高精度和更长信号</span>
                </div>
                
                <!-- ASK专用参数 -->
                <div class="ask-params" id="askParams">
                    <div class="form-group">
                        <label for="askAmplitude1">逻辑1振幅:</label>
                        <input type="range" id="askAmplitude1" min="0.5" max="1.0" step="0.1" value="1.0">
                        <span id="askAmp1Value">1.0</span>
                    </div>
                    <div class="form-group">
                        <label for="askAmplitude0">逻辑0振幅:</label>
                        <input type="range" id="askAmplitude0" min="0.0" max="0.5" step="0.1" value="0.1">
                        <span id="askAmp0Value">0.1</span>
                    </div>
                </div>
                  <!-- BPSK专用参数 -->
                <div class="bpsk-params" id="bpskParams" style="display: none;">
                    <div class="form-group">
                        <label for="bpskPhase1">逻辑1相位:</label>
                        <input type="range" id="bpskPhase1" min="0" max="360" step="30" value="0">
                        <span id="bpskPhase1Value">0°</span>
                    </div>
                    <div class="form-group">
                        <label for="bpskPhase0">逻辑0相位:</label>
                        <input type="range" id="bpskPhase0" min="0" max="360" step="30" value="180">
                        <span id="bpskPhase0Value">180°</span>
                    </div>
                </div>
                
                <!-- AM专用参数 -->
                <div class="am-params" id="amParams" style="display: none;">
                    <div class="form-group">
                        <label for="amModulationDepth">调制深度 (%):</label>
                        <input type="range" id="amModulationDepth" min="10" max="100" step="5" value="50">
                        <span id="amDepthValue">50%</span>
                    </div>
                    <div class="form-group">
                        <label for="amModulationFreq">调制频率 (Hz):</label>
                        <input type="number" id="amModulationFreq" value="1000" min="10" max="20000" step="10">
                        <span class="help-text">范围: 10Hz - 20kHz</span>
                    </div>
                </div>
                
                <!-- FM专用参数 -->
                <div class="fm-params" id="fmParams" style="display: none;">
                    <div class="form-group">
                        <label for="fmFrequencyDeviation">频偏 (Hz):</label>
                        <input type="number" id="fmFrequencyDeviation" value="5000" min="100" max="50000" step="100">
                        <span class="help-text">范围: 100Hz - 50kHz</span>
                    </div>
                    <div class="form-group">
                        <label for="fmModulationFreq">调制频率 (Hz):</label>
                        <input type="number" id="fmModulationFreq" value="1000" min="10" max="20000" step="10">
                        <span class="help-text">范围: 10Hz - 20kHz</span>
                    </div>
                </div>
            </div>
            
            <!-- 数据输入区域 -->
            <div class="data-panel">
                <h2>数据输入</h2>
                
                <div class="form-group">
                    <label for="dataInput">二进制数据:</label>
                    <textarea id="dataInput" rows="4" placeholder="输入二进制数据，如: 1010110011010101"></textarea>
                </div>
                
                <div class="form-group">
                    <label for="fileName">文件名:</label>
                    <input type="text" id="fileName" value="modulated_signal" placeholder="输入文件名(不含扩展名)">
                </div>                <div class="button-group">
                    <button id="generateRandomBtn" class="btn btn-secondary" title="根据当前参数生成随机二进制数据">生成随机数据</button>
                    <button id="generateTestBtn" class="btn btn-secondary" title="生成1010101010...交替模式的测试数据">生成测试信号(1010...)</button>
                    <button id="generateSignalBtn" class="btn btn-primary" title="使用当前参数和输入数据生成调制信号">生成调制信号</button>
                    <button id="quickTestBtn" class="btn btn-success" title="一键生成1010...数据并立即调制">快速测试(1010+调制)</button>
                    <button id="clearDataBtn" class="btn btn-secondary" title="清空所有数据和结果">清空数据</button>
                </div>
            </div>
              <!-- 波形预览 -->
            <div class="preview-panel">
                <h2>信号预览</h2>
                <div class="canvas-container">
                    <canvas id="signalCanvas" width="800" height="300"></canvas>
                    <div class="canvas-info">
                        <span id="signalInfo">等待生成信号...</span>
                    </div>
                </div>
                
                <!-- 波形控制按钮 -->
                <div class="waveform-controls">
                    <div class="control-row">
                        <label for="displayPoints">显示点数:</label>
                        <select id="displayPoints">
                            <option value="1000">1K点</option>
                            <option value="2000">2K点</option>
                            <option value="4000" selected>4K点</option>
                            <option value="8000">8K点</option>
                            <option value="16000">16K点</option>
                        </select>
                        <button id="refreshWaveBtn" class="btn btn-primary btn-small">刷新波形</button>
                    </div>
                    
                    <div class="control-row">
                        <label for="displayOffset">显示偏移:</label>
                        <input type="range" id="displayOffset" min="0" max="100" value="0" step="1">
                        <span id="offsetValue">0%</span>
                        <button id="resetViewBtn" class="btn btn-secondary btn-small">重置视图</button>
                    </div>
                    
                    <div class="control-row">
                        <button id="zoomInBtn" class="btn btn-info btn-small">放大</button>
                        <button id="zoomOutBtn" class="btn btn-info btn-small">缩小</button>
                        <button id="prevPageBtn" class="btn btn-warning btn-small">上一页</button>
                        <button id="nextPageBtn" class="btn btn-warning btn-small">下一页</button>
                    </div>
                </div>
            </div>
            
            <!-- 数据导出 -->
            <div class="export-panel">
                <h2>数据导出</h2>
                
                <div class="export-options">
                    <div class="form-group">
                        <label>导出格式:</label>
                        <div class="checkbox-group">
                            <label>
                                <input type="checkbox" id="exportTxt" checked> TXT文件 (十进制)
                            </label>
                            <label>
                                <input type="checkbox" id="exportBin" checked> BIN文件 (二进制)
                            </label>
                        </div>
                    </div>
                </div>
                
                <div class="data-preview">
                    <h3>DAC数据预览 (前100个点)</h3>
                    <textarea id="dataPreview" rows="8" readonly placeholder="生成信号后将显示DAC数据预览..."></textarea>
                </div>
                
                <div class="button-group">
                    <button id="downloadTxtBtn" class="btn btn-success" disabled>下载TXT</button>
                    <button id="downloadBinBtn" class="btn btn-success" disabled>下载BIN</button>
                </div>
            </div>
            
            <!-- 统计信息 -->
            <div class="stats-panel">
                <h2>信号统计</h2>                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="stat-label">采样点数:</span>
                        <span id="sampleCountStat" class="stat-value">8M</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">信号时长:</span>
                        <span id="signalDuration" class="stat-value">-</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">文件大小:</span>
                        <span id="fileSize" class="stat-value">-</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">平均值:</span>
                        <span id="avgValue" class="stat-value">-</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="modulation_generator.js"></script>
</body>
</html>